// File: /usr/lib/firefox/mozilla.cfg 
//
// My Firefox settings
// defaultPref();  // set new default value
// pref();         // set pref, but allow changes in current session
// lockPref();     // lock pref, disallow changes

////
//// Prevent Firefox from calling home
////

// Rate Firefox
lockPref("browser.selfsupport.url", "");
lockPref("extensions.getAddons.cache.enabled", false);

// Telemetry
lockPref("toolkit.telemetry.rejected", true);
lockPref("toolkit.telemetry.enabled", false);
lockPref("toolkit.telemetry.unified", false);

// Data Reporting
lockPref("datareporting.healthreport.uploadEnabled", false);
lockPref("datareporting.healthreport.service.enabled", false);
lockPref("datareporting.policy.dataSubmissionEnabled", false);
lockPref("datareporting.policy.dataSubmissionEnabled.v2", false);

// SSL Errors
lockPref("security.ssl.errorReporting.automatic", false);
lockPref("security.ssl.errorReporting.enabled", false);

// Error Reporting
lockPref("breakpad.reportURL", "");
lockPref("dom.ipc.plugins.flash.subprocess.crashreporter.enabled", false);


////
//// Privacy
////

// Lets sites know when you leave, used for Analytics
lockPref("beacon.enabled", false);

lockPref("browser.urlbar.suggest.history", false);
lockPref("privacy.donottrackheader.enabled", true);
lockPref("privacy.trackingprotection.enabled", true);

// Leaks real IP
lockPref("media.peerconnection.enabled", false);

// No Geolocation
lockPref("geo.enabled", false);
lockPref("browser.search.geoip.url", "");
lockPref("browser.search.geoSpecificDefaults", false);

// Stop popups from plugins like Flash
lockPref("privacy.popups.disable_from_plugins", 2);


////
//// Broken SSL algorithms
////
lockPref("security.ssl3.dhe_rsa_aes_128_sha", false);
lockPref("security.ssl3.dhe_rsa_aes_256_sha", false);


////
//// Built-in Advertising, Ya!
////

// Advertising tiles in new tabs... who the hell wants this!?
lockPref("browser.newtabpage.enhanced", false);
lockPref("browser.newtabpage.directory.ping", "");
lockPref("browser.newtabpage.directory.source", "");

// Location bar advertising, not as bad, but still...
lockPref("browser.aboutHomeSnippets.updateUrl", "");

// Disable nag screens on new profile / update
lockPref("browser.rights.3.shown", true);
lockPref("app.update.showInstalledUI", true);
lockPref("browser.startup.homepage_override.mstone", "ignore");
lockPref("toolkit.telemetry.prompted", 2);


////
//// Clear on shutdown
////

lockPref("privacy.cpd.cache", true);
lockPref("privacy.cpd.downloads", true);
lockPref("privacy.cpd.formdata", true);
lockPref("privacy.cpd.history", true);
lockPref("privacy.cpd.offlineApps", true);
lockPref("privacy.cpd.siteSettings", true);
lockPref("privacy.clearOnShutdown.cache", true);
lockPref("privacy.clearOnShutdown.downloads", true);
lockPref("privacy.clearOnShutdown.cache", true);
lockPref("privacy.clearOnShutdown.formdata", true);
lockPref("privacy.clearOnShutdown.history", true);
lockPref("privacy.clearOnShutdown.offlineApps", true);
lockPref("privacy.clearOnShutdown.siteSettings", true);


////
//// Speed Tweaks
////

pref("nglayout.initialpaint.delay", 0);

// Pipelining
pref("network.http.pipelining", true);
pref("network.http.proxy.pipelining", true);
pref("network.http.pipelining.maxrequests", 8);
pref("network.http.pipelining.max-optimistic-requests", 8);

// Redrawing webpage constantly can slow performance down
pref("content.notify.ontimer", true);
pref("content.notify.interval", 500000);

// Number of pages to store in a tab's history. Too many increases memory use
pref("browser.sessionhistory.max_entries", 5);

////
//// Disable bloatware, or Firefox pulling a emacs
////

// Reader Mode
lockPref("reader.parse-on-load.enabled", false);
lockPref("readinglist.server", "");

// Pocket
lockPref("browser.pocket.api", "");
lockPref("browser.pocket.enabled", false);
lockPref("browser.pocket.site", "");
lockPref("browser.pocket.oAuthConsumerKey", "");

// Firefox Hello
lockPref("loop.enabled", false);

// Social Stuff
lockPref("social.directories", "");
lockPref("social.remote-install.enabled", false);
lockPref("social.shareDirectory", "");
lockPref("social.toast-notifications.enabled", false);
lockPref("social.whitelist", "");

////
//// Evil DRM Crapware
////

pref("browser.eme.ui.enabled", false);
pref("media.gmp-eme-adobe.enabled", false);
pref("media.eme.enabled", false);
pref("media.eme.apiVisible", false);

////
//// Evil Javascript Crap
////

// Because we TOTALLY want a site to know if we're a laptop
lockPref("dom.battery.enabled", false);

// Because we TOTALLY want sites to know our type of network connection
lockPref("dom.netinfo.enabled", false);
lockPref("dom.network.enabled", false);

// Annoying "Are you sure you want to leave this page" notice. KILL IT WITH FIRE!
lockPref("dom.disable_beforeunload", true);

// For her pleasure, enable. Otherwise, no. (just kidding!)
lockPref("dom.vibrator.enabled", false);


////
//// Personal Settings
////

// Browser homepage
lockPref("browser.startup.homepage", "https:\/\/duckduckgo.com");

// Unhide http from URL bar
pref("browser.urlbar.trimURLs", false);

// Allow magnet protocol to be opened with an application (why is this disabled?)
pref("network.protocol-handler.expose.magnet", false);

// Make spellchecker work everywhere
pref("layout.spellcheckDefault", 2);
pref("ui.SpellCheckerUnderlineStyle", 4);

// Disable "Allow Fullscreen" nag on HTML5 videos
pref("full-screen-api.warning.timeout", 0);

// Force new tabs to open at the end and not adjacent to the current one
pref("browser.tabs.insertRelatedAfterCurrent", false);

// Turn off Firefox's internal DNS, since I use unbound locally
lockPref("network.dns.disablePrefetch", true);
lockPref("network.dnsCacheExpiration", 0);

// Turn off Anti-virus scanning... THIS IS LIINNNNUUUXXXXX!
lockPref("browser.download.manager.scanWhenDone", false);

// Annoying extension countdown
lockPref("security.dialog_enable_delay", 0);

// External source editor
pref("view_source.editor.external", true);
pref("view_source.editor.path", "/usr/bin/geany");

// Get more results for addons
pref("extensions.getAddons.maxResults", 10);

// Cache secure webpages for performance. Note this is normally a security
// risk, but since I employ full disk encryption, it renders the security risk
// a moot point
pref("browser.cache.disk_cache_ssl", true);
